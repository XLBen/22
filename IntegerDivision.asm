@R1
D=M
@DIVIDE_BY_ZERO
D;JEQ

@R0
D=M
@R5
M=0
@SKIP_R0_NEG
D;JGE
@R5
M=1
(SKIP_R0_NEG)
@R0
D=M
@ABS_R0
M=D
@SKIP_R0_ABS
D;JGE
@ABS_R0
M=-D
(SKIP_R0_ABS)

@R1
D=M
@R6
M=0
@SKIP_R1_NEG
D;JGE
@R6
M=1
(SKIP_R1_NEG)
@R1
D=M
@ABS_R1
M=D
@SKIP_R1_ABS
D;JGE
@ABS_R1
M=-D
(SKIP_R1_ABS)

@ABS_R0
D=M
@32768
D=D-A
@CHECK_OVERFLOW
D;JEQ
@START_DIVISION
0;JMP

(CHECK_OVERFLOW)
@ABS_R1
D=M
@1
D=D-A
@OVERFLOW_ERROR
D;JEQ

(START_DIVISION)
@ABS_R0
D=M
@R3
M=D
@R2
M=0

(LOOP)
@ABS_R1
D=M
@R3
D=M-D
@END_LOOP
D;JLT
@ABS_R1
D=M
@R3
M=M-D
@R2
M=M+1
@LOOP
0;JMP


(END_LOOP)
@R5
D=M
@R6
D=D-M
@SET_NEGATIVE_QUOTIENT
D;JNE
@SET_REMAINDER_SIGN
0;JMP

(SET_NEGATIVE_QUOTIENT)
@R2
M=-M

(SET_REMAINDER_SIGN)
@R5
D=M
@SKIP_REMAINDER_NEG
D;JEQ
@R3
M=-M

(SKIP_REMAINDER_NEG)
@R4
M=0
@END
0;JMP

(DIVIDE_BY_ZERO)
@R2
M=0
@R3
M=0
@R4
M=1
@END
0;JMP

(OVERFLOW_ERROR)
@R2
M=0
@R3
M=0
@R4
M=1
@END
0;JMP

(END)
@END
0;JMP